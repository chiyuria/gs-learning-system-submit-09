# README

## ① 課題名

**Learning System Prototype**

---

## ② 課題内容（どんな作品か）

ログイン後、ユーザーが **3つの設問に回答**し、回答内容をもとに **ワーク（記述課題）を作成・保存**できる
**シンプルな入力・保存型のWebアプリ**です。

本課題では、PHPとMySQLを用いたデータの登録・取得（CRUD）に加え、
**認証（ログイン）・権限制御・画面遷移の状態管理**を含むアプリ構成の理解を目的として実装しました。

処理の役割が混在しないよう、
共通処理（DB接続・認証・ユーティリティ）を `inc/` に集約し、
画面（表示）と処理（action）を分離して、保守しやすい構成を意識しています。

---

## ③ アプリのデプロイURL

**アプリURL**
[https://www.logic-craft.jp/learning-system/index.php](https://www.logic-craft.jp/learning-system/index.php)

---

## ④ アプリにログイン情報がある場合

あり（ログイン認証あり）

本アプリでは、ユーザーID／パスワードでログインし、
ログイン状態（セッション）とロールに応じてアクセス可能な画面を制御しています。

### テスト用アカウント

* **学生アカウント**
  ID：`stu001` / PW：`stu001`

* **教員アカウント**
  ID：`tch001` / PW：`tch001`

* **管理者アカウント**
  ID：`admin` / PW：`admin`

---

## ⑤ こだわった点

### ■ 処理ごとの責務分離を意識した構成

画面表示とDB更新処理が1ファイルに混在しないよう、
POST処理は `*_action.php` 側に分離し、表示側は入力と描画に集中させました。
これにより、機能追加や修正時の影響範囲を限定できる構成にしています。

---

### ■ 共通処理の集約（DB接続 / エスケープ / リダイレクト）

DB接続や共通ユーティリティは `inc/ls/functions.php` にまとめ、
各ページから共通関数として呼び出す構成にしました。
また、接続設定は `config/ls/db.php` に分離し、設定と処理の責務を分けています。

---

### ■ ログイン認証とロール制御（アクセス制御）

ログイン状態はセッションで管理し、
ログイン必須ページでは `require_login()`（または同等の制御）により
**URL直接アクセス（直叩き）を遮断**しています。

さらに、ロールに応じた制御を用意し、
管理者・教員・学生で表示や導線を分岐できる構成にしています。

---

### ■ 設問の回答状況に応じた表示制御（状態管理）

ワーク画面では、設問回答が揃っている場合のみワーク入力欄を表示するなど、
入力フローに沿った状態管理を行っています。

回答状況の判定は、現在アクティブな設問に対する回答を基準にし、
設問の並び変更があっても破綻しにくい形を意識しました。

---

### ■ CSSのレイヤー分割（Tokens / Base / Components / Pages）

CSSは以下のように役割で分割し、見通しと再利用性を高めています。

* Tokens：`tokens.css` / `tokens-light.css`
* Base：`reset.css` / `typography.css` / `layout.css`
* Components：`assets/css/components/*`
* Pages：`assets/css/pages/*`
* Utilities：`utilities.css` / `scroll.css`

---

## ⑥ 難しかった点・次回トライしたいこと

### ■ 難しかった点

* セッションを用いたログイン状態管理とページ制御
* ロール別の導線・表示分岐の設計
* 設問回答の「状態」に応じた表示制御（未完了時のガード）
* DB操作（取得・保存）の処理分離と整理
* CSSの責務分割と、ページ間で崩れないスタイル設計

---

### ■ 次回トライしたいこと

* バリデーションの強化（文字数制限、入力形式チェック等）
* CSRF対策などセキュリティ面の補強
* エラーハンドリングとユーザー向けメッセージの改善
* 管理画面の機能拡張（検索・フィルタ等）
* 画面共通部品のさらなる再利用性向上（ヘッダー等）

---

## ⑦ フリー項目

本課題では、DBを用いた入力・保存の流れだけでなく、
ログイン認証・ロール制御・状態に応じた画面分岐を含めた構成を実装しました。

また、設定ファイル（DB接続）をアプリ本体から分離し、
共通処理を `inc/` に集約することで、
保守性と拡張性を意識したコード整理を行っています。

---
